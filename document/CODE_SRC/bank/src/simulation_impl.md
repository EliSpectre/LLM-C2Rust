# simulation 文件文档

# 文件概述

`simulation.c` 文件是银行业务模拟系统的核心实现文件，主要负责模拟银行业务的日常运作流程。该文件包含初始化模拟环境、运行模拟、处理事件以及与用户交互等功能。通过事件驱动的方式，模拟客户的到达和离开，记录每个窗口的服务历史，并提供查询功能。

# 函数说明

## `void OpenForDay()`

### 功能
初始化银行业务模拟环境。

### 参数
无

### 返回值
无

### 注意事项
- 该函数会打印欢迎信息。
- 初始化事件链表、银行窗口队列和窗口服务历史记录。

## `void Simulation()`

### 功能
运行银行业务模拟。

### 参数
无

### 返回值
无

### 注意事项
- 该函数会持续处理事件链表中的事件，直到所有事件处理完毕。
- 处理完所有事件后，会调用 `Interact()` 函数进行用户交互。

## `void Interact()`

### 功能
与用户交互，查询窗口服务历史记录。

### 参数
无

### 返回值
无

### 注意事项
- 用户可以输入窗口编号查看对应窗口的服务历史。
- 输入0退出查询。
- 输入无效窗口编号时会提示错误。

## `void Event_Drive(Event_ptr p)`

### 功能
事件驱动处理函数，根据事件类型调用相应的事件处理函数。

### 参数
- `Event_ptr p`：指向当前事件的指针。

### 返回值
无

### 注意事项
- 如果事件为空，会打印提示信息。
- 处理完事件后，会重新排序事件链表并删除已处理的事件。

## `void Arrival_Event(EventList L, Event_ptr p)`

### 功能
处理客户到达事件。

### 参数
- `EventList L`：事件链表。
- `Event_ptr p`：指向当前到达事件的指针。

### 返回值
无

### 注意事项
- 随机生成下一个到达事件的时间和客户办理业务的时间。
- 将客户加入最快窗口的队列，并为其添加离开事件。

## `void Leave_Event(EventList L, Event_ptr p)`

### 功能
处理客户离开事件。

### 参数
- `EventList L`：事件链表。
- `Event_ptr p`：指向当前离开事件的指针。

### 返回值
无

### 注意事项
- 从指定窗口队列中取出最先到的客户。
- 添加该窗口的历史记录，并累加客户办理业务的时间到总时间。

# 数据结构

该文件未定义新的结构体或枚举，但依赖于以下外部定义：

- `Event_ptr`：指向事件结构的指针。
- `EventList`：事件链表类型。
- `Person`：表示客户的结构体。

具体定义请参考相关头文件。

# 使用示例

```c
#include "simulation.h"

int main() {
    OpenForDay();  // 初始化银行业务模拟环境
    Simulation();  // 运行模拟
    return 0;
}
```

# 依赖关系

## 依赖文件

- `stdio.h`：标准输入输出库。
- `stdlib.h`：标准库，用于内存分配和随机数生成。
- `string.h`：字符串处理库。
- `../include/simulation.h`：模拟相关定义和声明。
- `../include/event_management.h`：事件管理相关定义和声明。
- `../include/window_management.h`：窗口管理相关定义和声明。
- `../include/history_management.h`：历史记录管理相关定义和声明。
- `../include/utils.h`：通用工具函数定义和声明。

## 被依赖文件

该文件可能被以下文件依赖（具体取决于项目结构）：

- 主程序文件（如 `main.c`），调用 `OpenForDay()` 和 `Simulation()` 函数启动模拟。

---
*此文档由 CFileDocGenerator 自动生成 - 2025-04-07 17:20*