# tools 文件文档

```markdown
# tools.h 文件文档

## 1. 文件概述  
该头文件提供文件操作辅助函数，主要功能是获取指定文件的大小。通过声明`getFileSize`函数，为开发者提供跨平台的文件大小查询能力，适用于需要处理文件长度的场景。

---

## 2. 函数说明  

### **`getFileSize`**  
**功能**  
获取文件的字节大小。  

**参数**  
| 参数名 | 类型 | 说明 |
|--------|------|------|
| `fp` | `FILE *` | 需要查询的文件指针，要求已通过`fopen`成功打开 |

**返回值**  
- **成功**：返回文件的字节大小（`long`类型）  
- **失败**：返回`-1L`（当文件指针无效或无法获取文件大小时）  

**注意事项**  
1. 调用前需确保文件已正确打开（非`NULL`指针）  
2. 函数内部会临时调整文件位置指针（通过`fseek`）以获取文件大小，调用后文件位置将被重置到原始位置  
3. 对于文本模式打开的文件，可能因系统换行符转换导致结果偏差，建议使用二进制模式打开文件  

---

## 3. 数据结构  
该文件未定义任何结构体、枚举或类型定义。

---

## 4. 使用示例  

```c
#include "tools.h"
#include <stdio.h>

int main() {
    FILE *file = fopen("example.txt", "rb"); // 以二进制模式打开文件
    if (file == NULL) {
        perror("文件打开失败");
        return 1;
    }

    long size = getFileSize(file);
    if (size == -1L) {
        fprintf(stderr, "获取文件大小失败\n");
        fclose(file);
        return 1;
    }

    printf("文件大小: %ld 字节\n", size);
    fclose(file);
    return 0;
}
```

**关键步骤说明**  
1. 使用二进制模式(`"rb"`)打开文件以避免平台差异  
2. 在调用`getFileSize`前检查文件指针有效性  
3. 处理错误返回值（`-1L`）并确保文件关闭  

---

## 5. 依赖关系  

**依赖项**  
- `<stdio.h>`：标准输入输出库，提供`FILE`类型及文件操作函数  

**被依赖项**  
该头文件需被包含在需要获取文件大小的源文件中（如`main.c`），同时需要对应的实现文件（如`tools.c`）提供`getFileSize`的函数定义。  
```

---
*此文档由 CFileDocGenerator 自动生成 - 2025-04-04 21:44*